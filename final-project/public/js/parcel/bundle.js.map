{"mappings":"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","sources":["public/js/index.js","public/js/login.js","public/js/alert.js","public/js/updateSettings.js","public/js/mapbox.js"],"sourcesContent":["/* eslint-disable */\nimport { signup, login, logout } from './login';\nimport { updateSettings } from './updateSettings';\nimport { displayMap } from './mapbox';\n\nconst mapBox = document.getElementById('map');\nconst loginForm = document.querySelector('.form--login');\nconst signupForm = document.querySelector('.form--signup');\nconst logOutBtn = document.querySelector('.nav__el--logout');\nconst userDataForm = document.querySelector('.form-user-data');\nconst passwordForm = document.querySelector('.form-user-password');\nconst savePasswordBtn = document.querySelector('.btn--save-password');\n\nif (mapBox) {\n  const locations = JSON.parse(mapBox.dataset.locations);\n  displayMap(locations);\n}\n\nif (loginForm) {\n  loginForm.addEventListener('submit', event => {\n    event.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n    document.getElementById('email').value = '';\n    document.getElementById('password').value = '';\n  });\n}\n\nif (signupForm) {\n  signupForm.addEventListener('submit', event => {\n    event.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    const name = document.getElementById('name').value;\n    signup(name, email, password);\n    document.getElementById('name').value = '';\n    document.getElementById('email').value = '';\n    document.getElementById('password').value = '';\n  });\n}\n\nif (logOutBtn) logOutBtn.addEventListener('click', logout);\n\nif (userDataForm) {\n  userDataForm.addEventListener('submit', event => {\n    event.preventDefault();\n    const email = document.getElementById('email').value;\n    const name = document.getElementById('name').value;\n    updateSettings({ name, email }, 'data');\n  });\n}\n\nif (passwordForm) {\n  passwordForm.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    savePasswordBtn.textContent = 'Updating...';\n    const passwordCurrent = document.getElementById('password-current').value;\n    const password = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('password-confirm').value;\n    await updateSettings(\n      { passwordCurrent, password, passwordConfirm },\n      'password',\n    );\n    savePasswordBtn.textContent = 'Save password';\n    document.getElementById('password-current').value = '';\n    document.getElementById('password').value = '';\n    document.getElementById('password-confirm').value = '';\n  });\n}\n","/* eslint-disable */\nimport { displayAlert } from './alert';\n\nexport const signup = async (name, email, password) => {\n\ttry {\n\t\tconst res = await fetch('/api/v1/users/signup', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({ name, email, password }),\n\t\t});\n\n\t\tconst data = await res.json();\n\n\t\tif (res.ok && data.status === 'success') {\n\t\t\tdisplayAlert('success', 'Logged in successfully!');\n\t\t\twindow.setTimeout(() => {\n\t\t\t\tlocation.assign('/');\n\t\t\t}, 1500);\n\t\t} else {\n\t\t\tthrow new Error(data.message);\n\t\t}\n\t} catch (err) {\n\t\tdisplayAlert('error', err.message);\n\t}\n};\n\nexport const login = async (email, password) => {\n\ttry {\n\t\tconst res = await fetch('/api/v1/users/login', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({ email, password }),\n\t\t});\n\n\t\tconst data = await res.json();\n\n\t\tif (res.ok && data.status === 'success') {\n\t\t\tdisplayAlert('success', 'Logged in successfully!');\n\t\t\twindow.setTimeout(() => {\n\t\t\t\tlocation.assign('/');\n\t\t\t}, 1500);\n\t\t} else {\n\t\t\tthrow new Error(data.message);\n\t\t}\n\t} catch (err) {\n\t\tdisplayAlert('error', err.message);\n\t}\n};\n\nexport const logout = async () => {\n\ttry {\n\t\tconst res = await fetch('/api/v1/users/logout', {\n\t\t\tmethod: 'GET',\n\t\t});\n\n\t\tconst data = await res.json();\n\n\t\tif (res.ok && data.status === 'success') {\n\t\t\twindow.setTimeout(() => {\n\t\t\t\tlocation.assign('/');\n\t\t\t}, 1500);\n\t\t\t// location.reload(true);\n\t\t} else {\n\t\t\tthrow new Error('Error during logout');\n\t\t}\n\t} catch (err) {\n\t\tconsole.log(err);\n\t\tdisplayAlert('error', 'Error Logged Out! Try Again!');\n\t}\n};\n","/*eslint-disable */\r\n\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\nexport const displayAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n","/* eslint-disable */\nimport { displayAlert } from './alert';\n\nexport const updateSettings = async (data, type) => {\n\ttry {\n\t\tconst dataType =\n\t\t\ttype.trim().toLowerCase().charAt(0).toUpperCase() + type.slice(1);\n\t\tconst url = `/api/v1/users/${\n\t\t\tdataType === 'Password' ? 'updateMyPassword' : 'updateMe'\n\t\t}`;\n\n\t\tif (dataType !== 'Password' && dataType !== 'Data') {\n\t\t\treturn displayAlert('error', 'Invalid type provided!');\n\t\t}\n\n\t\tconst res = await fetch(url, {\n\t\t\tmethod: 'PATCH',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify(data),\n\t\t});\n\n\t\tconst responseData = await res.json();\n\n\t\tif (res.ok && responseData.status === 'success') {\n\t\t\tdisplayAlert('success', `${dataType} updated successfully!`);\n\t\t\t// location.reload(true);\n\t\t} else {\n\t\t\tthrow new Error(responseData.message || 'Error updating data!');\n\t\t}\n\t} catch (err) {\n\t\tdisplayAlert('error', err.message);\n\t}\n};\n","/*eslint-disable */\n\nexport  const displayMap = locations => {\n  mapboxgl.accessToken =\n    'pk.eyJ1Ijoidml2YXZpa3RvcnlpYSIsImEiOiJjbHo4ZXczZ2cwMDUwMmtzYTByNmVqenJwIn0.Dl-Sgygd-puOem9UETCBjg';\n\n  var map = new mapboxgl.Map({\n    container: 'map',\n    style: 'mapbox://styles/mapbox/navigation-day-v1',\n    scrollZoom: false,\n    //   center: [-118.11349, 34.111745], // starting position [lng, lat]\n    //   zoom: 5,\n    //   interactive: false,\n  });\n\n  const bounds = new mapboxgl.LngLatBounds();\n\n  locations.forEach(loc => {\n    // Create marker\n    const el = document.createElement('div');\n    el.className = 'marker';\n\n    // add marker\n    new mapboxgl.Marker({\n      element: el,\n      anchor: 'bottom',\n    })\n      .setLngLat(loc.coordinates)\n      .addTo(map);\n\n    // add popup\n    new mapboxgl.Popup({\n      offset: 30,\n    })\n      .setLngLat(loc.coordinates)\n      .setHTML(`<p>Day ${loc.day}: ${loc.description}  </p>`)\n      .addTo(map);\n\n    // extend map bounds to include current location\n    bounds.extend(loc.coordinates);\n  });\n\n  map.fitBounds(bounds, {\n    padding: {\n      top: 200,\n      bottom: 200,\n      left: 100,\n      right: 100,\n    },\n  });\n};\n"],"names":[],"version":3,"file":"bundle.js.map","sourceRoot":"../../../"}