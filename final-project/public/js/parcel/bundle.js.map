{"mappings":"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","sources":["public/js/index.js","public/js/login.js","public/js/alert.js","public/js/updateSettings.js","public/js/mapbox.js","public/js/bookTour.js"],"sourcesContent":["/* eslint-disable */\nimport { signup, login, logout } from './login';\nimport { updateSettings } from './updateSettings';\nimport { displayMap } from './mapbox';\nimport { bookTour } from './bookTour';\nimport { displayAlert } from './alert';\n\nconst mapBox = document.getElementById('map');\nconst loginForm = document.querySelector('.form--login');\nconst signupForm = document.querySelector('.form--signup');\nconst logOutBtn = document.querySelector('.nav__el--logout');\nconst userDataForm = document.querySelector('.form-user-data');\nconst passwordForm = document.querySelector('.form-user-password');\nconst savePasswordBtn = document.querySelector('.btn--save-password');\nconst bookBtn = document.getElementById('book-tour');\n\nif (mapBox) {\n  const locations = JSON.parse(mapBox.dataset.locations);\n  displayMap(locations);\n}\n\nif (loginForm) {\n  loginForm.addEventListener('submit', event => {\n    event.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n    document.getElementById('email').value = '';\n    document.getElementById('password').value = '';\n  });\n}\n\nif (signupForm) {\n  signupForm.addEventListener('submit', event => {\n    event.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    const name = document.getElementById('name').value;\n    signup(name, email, password);\n    document.getElementById('name').value = '';\n    document.getElementById('email').value = '';\n    document.getElementById('password').value = '';\n  });\n}\n\nif (logOutBtn) logOutBtn.addEventListener('click', logout);\n\nif (userDataForm) {\n  userDataForm.addEventListener('submit', event => {\n    event.preventDefault();\n    const email = document.getElementById('email').value;\n    const name = document.getElementById('name').value;\n    updateSettings({ name, email }, 'data');\n  });\n}\n\nif (passwordForm) {\n  passwordForm.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    savePasswordBtn.textContent = 'Updating...';\n    const passwordCurrent = document.getElementById('password-current').value;\n    const password = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('password-confirm').value;\n    await updateSettings(\n      { passwordCurrent, password, passwordConfirm },\n      'password',\n    );\n    savePasswordBtn.textContent = 'Save password';\n    document.getElementById('password-current').value = '';\n    document.getElementById('password').value = '';\n    document.getElementById('password-confirm').value = '';\n  });\n}\n\nif (bookBtn) {\n\tbookBtn.addEventListener('click', async ({ currentTarget: button }) => {\n\t\tconst setButtonState = (text) => (button.textContent = text);\n\n\t\ttry {\n      setButtonState('Processing...');\n      await new Promise((resolve) => setTimeout(resolve, 3000));\n\t\t\tawait bookTour();\n\t\t} catch (error) {\n\t\t\tconsole.error('Booking failed:', error);\n\t\t} finally {\n\t\t\tsetButtonState('Book tour now!');\n\t\t}\n\t});\n}\n\n  const alertMessage = document.querySelector('body').dataset.alert;\n\tif (alertMessage) displayAlert('success', alertMessage, 10);\n","/* eslint-disable */\nimport { displayAlert } from './alert';\n\nexport const signup = async (name, email, password) => {\n\ttry {\n\t\tconst res = await fetch('/api/v1/users/signup', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({ name, email, password }),\n\t\t});\n\n\t\tconst data = await res.json();\n\n\t\tif (res.ok && data.status === 'success') {\n\t\t\tdisplayAlert('success', 'Logged in successfully!');\n\t\t\twindow.setTimeout(() => {\n\t\t\t\tlocation.assign('/');\n\t\t\t}, 1500);\n\t\t} else {\n\t\t\tthrow new Error(data.message);\n\t\t}\n\t} catch (err) {\n\t\tdisplayAlert('error', err.message);\n\t}\n};\n\nexport const login = async (email, password) => {\n\ttry {\n\t\tconst res = await fetch('/api/v1/users/login', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({ email, password }),\n\t\t});\n\n\t\tconst data = await res.json();\n\n\t\tif (res.ok && data.status === 'success') {\n\t\t\tdisplayAlert('success', 'Logged in successfully!');\n\t\t\twindow.setTimeout(() => {\n\t\t\t\tlocation.assign('/');\n\t\t\t}, 1500);\n\t\t} else {\n\t\t\tthrow new Error(data.message);\n\t\t}\n\t} catch (err) {\n\t\tdisplayAlert('error', err.message);\n\t}\n};\n\nexport const logout = async () => {\n\ttry {\n\t\tconst res = await fetch('/api/v1/users/logout', {\n\t\t\tmethod: 'GET',\n\t\t});\n\n\t\tconst data = await res.json();\n\n\t\tif (res.ok && data.status === 'success') {\n\t\t\twindow.setTimeout(() => {\n\t\t\t\tlocation.assign('/');\n\t\t\t}, 1500);\n\t\t\t// location.reload(true);\n\t\t} else {\n\t\t\tthrow new Error('Error during logout');\n\t\t}\n\t} catch (err) {\n\t\tconsole.log(err);\n\t\tdisplayAlert('error', 'Error Logged Out! Try Again!');\n\t}\n};\n","/*eslint-disable */\r\n\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\nexport const displayAlert = (type, msg, time = 7) => {\r\n\thideAlert();\r\n\tconst markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n\tdocument.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n\twindow.setTimeout(hideAlert, time * 1000);\r\n};\r\n","/* eslint-disable */\nimport { displayAlert } from './alert';\n\nexport const updateSettings = async (data, type) => {\n\ttry {\n\t\tconst dataType =\n\t\t\ttype.trim().toLowerCase().charAt(0).toUpperCase() + type.slice(1);\n\t\tconst url = `/api/v1/users/${\n\t\t\tdataType === 'Password' ? 'updateMyPassword' : 'updateMe'\n\t\t}`;\n\n\t\tif (dataType !== 'Password' && dataType !== 'Data') {\n\t\t\treturn displayAlert('error', 'Invalid type provided!');\n\t\t}\n\n\t\tconst res = await fetch(url, {\n\t\t\tmethod: 'PATCH',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify(data),\n\t\t});\n\n\t\tconst responseData = await res.json();\n\n\t\tif (res.ok && responseData.status === 'success') {\n\t\t\tdisplayAlert('success', `${dataType} updated successfully!`);\n\t\t\t// location.reload(true);\n\t\t} else {\n\t\t\tthrow new Error(responseData.message || 'Error updating data!');\n\t\t}\n\t} catch (err) {\n\t\tdisplayAlert('error', err.message);\n\t}\n};\n","/*eslint-disable */\n\nconst MAPBOX_ACCESS_TOKEN =\n\t'pk.eyJ1Ijoidml2YXZpa3RvcnlpYSIsImEiOiJjbHo4ZXczZ2cwMDUwMmtzYTByNmVqenJwIn0.Dl-Sgygd-puOem9UETCBjg';\n\nexport const displayMap = (locations) => {\n\tmapboxgl.accessToken = MAPBOX_ACCESS_TOKEN;\n\n\tconst map = new mapboxgl.Map({\n\t\tcontainer: 'map',\n\t\tstyle: 'mapbox://styles/mapbox/navigation-day-v1',\n\t\tscrollZoom: false,\n\t});\n\n\tconst bounds = new mapboxgl.LngLatBounds();\n\n  locations.forEach((loc, index) => {\n    const dayNumber = index + 1;\n\t\t// Extract coordinates if they're inside a GeoJSON Point object\n\t\tconst coordinates =\n\t\t\tloc.coordinates && loc.coordinates.type === 'Point'\n\t\t\t\t? loc.coordinates.coordinates\n\t\t\t\t: loc.coordinates;\n\n\t\tif (coordinates && !isNaN(coordinates[0]) && !isNaN(coordinates[1])) {\n\t\t\t// Create marker\n\t\t\tconst el = document.createElement('div');\n\t\t\tel.className = 'marker';\n\n\t\t\t// Add marker\n\t\t\tnew mapboxgl.Marker({\n\t\t\t\telement: el,\n\t\t\t\tanchor: 'bottom',\n\t\t\t})\n\t\t\t\t.setLngLat(coordinates)\n\t\t\t\t.addTo(map);\n\n\t\t\t// Add popup\n\t\t\tnew mapboxgl.Popup({\n\t\t\t\toffset: 30,\n\t\t\t})\n\t\t\t\t.setLngLat(coordinates)\n\t\t\t\t.setHTML(`<p>Day ${dayNumber}: ${loc.description}  </p>`)\n\t\t\t\t.addTo(map);\n\n\t\t\tbounds.extend(coordinates);\n\t\t} else {\n\t\t\tconsole.error('Invalid coordinates:', coordinates);\n\t\t}\n\t});\n\n\tmap.fitBounds(bounds, {\n\t\tpadding: {\n\t\t\ttop: 200,\n\t\t\tbottom: 200,\n\t\t\tleft: 100,\n\t\t\tright: 100,\n\t\t},\n\t});\n};\n","/* eslint-disable */\nimport { displayAlert } from './alert';\n\nexport const bookTour = async () => {\n\ttry {\n\t\tconst response = await fetch('/api/v1/bookings', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t});\n\n\t\tconst responseData = await response.json();\n\n\t\tif (response.ok && responseData.status === 'success') {\n\t\t\tdisplayAlert('success', 'Booking is successful!');\n\t\t\tsetTimeout(() => location.assign('/'), 1500);\n\t\t} else if (response.status === 409) {\n\t\t\tthrow new Error('No spots available for booking at the moment!');\n\t\t} else {\n\t\t\tthrow new Error(responseData.message || 'Booking failed');\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('Error during booking:', error);\n\n\t\tdisplayAlert(\n\t\t\t'error',\n\t\t\terror.message || 'Something went wrong, please try again.',\n\t\t);\n\n\t\tthrow error;\n\t}\n};\n"],"names":[],"version":3,"file":"bundle.js.map","sourceRoot":"../../../"}