{"mappings":"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","sources":["public/js/index.js","public/js/login.js","public/js/alert.js","public/js/updateSettings.js","public/js/mapbox.js"],"sourcesContent":["/* eslint-disable */\nimport '@babel/polyfill';\nimport { signup, login, logout } from './login';\nimport { updateSettings } from './updateSettings';\nimport { displayMap } from './mapbox';\n\nconst mapBox = document.getElementById('map');\nconst loginForm = document.querySelector('.form--login');\nconst signupForm = document.querySelector('.form--signup');\nconst logOutBtn = document.querySelector('.nav__el--logout');\nconst userDataForm = document.querySelector('.form-user-data');\nconst passwordForm = document.querySelector('.form-user-password');\nconst savePasswordBtn = document.querySelector('.btn--save-password');\n\nif (mapBox) {\n  const locations = JSON.parse(mapBox.dataset.locations);\n  displayMap(locations);\n}\n\nif (loginForm) {\n  loginForm.addEventListener('submit', event => {\n    event.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n    document.getElementById('email').value = '';\n    document.getElementById('password').value = '';\n  });\n}\n\nif (signupForm) {\n  signupForm.addEventListener('submit', event => {\n    event.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    const name = document.getElementById('name').value;\n    signup(name, email, password);\n    document.getElementById('name').value = '';\n    document.getElementById('email').value = '';\n    document.getElementById('password').value = '';\n  });\n}\n\nif (logOutBtn) logOutBtn.addEventListener('click', logout);\n\nif (userDataForm) {\n  userDataForm.addEventListener('submit', event => {\n    event.preventDefault();\n    const email = document.getElementById('email').value;\n    const name = document.getElementById('name').value;\n    updateSettings({ name, email }, 'data');\n  });\n}\n\nif (passwordForm) {\n  passwordForm.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    savePasswordBtn.textContent = 'Updating...';\n    const passwordCurrent = document.getElementById('password-current').value;\n    const password = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('password-confirm').value;\n    await updateSettings(\n      { passwordCurrent, password, passwordConfirm },\n      'password',\n    );\n    savePasswordBtn.textContent = 'Save password';\n    document.getElementById('password-current').value = '';\n    document.getElementById('password').value = '';\n    document.getElementById('password-confirm').value = '';\n  });\n}\n","/* eslint-disable */\nimport axios from 'axios';\nimport { displayAlert } from './alert';\n\nexport const signup = async (name, email, password) => {\n  try {\n    const res = await axios({\n      method: 'POST',\n      url: '/api/v1/users/signup',\n      data: {\n        name,\n        email,\n        password,\n      },\n    });\n\n    if (res.data.status === 'success') {\n      displayAlert('success', 'Logged in successfully!');\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n    }\n  } catch (err) {\n    displayAlert('error', err.response.data.message);\n  }\n};\n\nexport const login = async (email, password) => {\n  try {\n    const res = await axios({\n      method: 'POST',\n      url: '/api/v1/users/login',\n      data: {\n        email,\n        password,\n      },\n    });\n\n    if (res.data.status === 'success') {\n      displayAlert('success', 'Logged in successfully!');\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n    }\n  } catch (err) {\n    displayAlert('error', err.response.data.message);\n  }\n};\n\nexport const logout = async () => {\n  try {\n    const res = await axios({\n      method: 'GET',\n      url: '/api/v1/users/logout',\n    });\n    if (res.data.status === 'success') {\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n      // location.reload(true);\n    }\n  } catch (err) {\n    console.log(err);\n    displayAlert('error', 'Error Logged Out! Try Again!');\n  }\n};\n","/*eslint-disable */\r\n\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\nexport const displayAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n","/* eslint-disable */\n\nimport axios from 'axios';\nimport { displayAlert } from './alert';\n\nexport const updateSettings = async (data, type) => {\n  try {\n    const dataType =\n      type.trim().toLowerCase().charAt(0).toUpperCase() + type.slice(1);\n    const url = `/api/v1/users/${dataType === 'Password' ? 'updateMyPassword' : 'updateMe'}`;\n\n    if (dataType !== 'Password' && dataType !== 'Data') {\n      return displayAlert('error', 'Invalid type provided!');\n    }\n\n    const res = await axios({\n      method: 'PATCH',\n      url,\n      data,\n    });\n\n    console.log(res);\n\n    if (res.data.status === 'success') {\n      displayAlert('success', `${dataType} updated successfully!`);\n      // location.reload(true);\n    }\n  } catch (err) {\n    displayAlert(\n      'error',\n      err.response?.data?.message || 'Error updating data!',\n    );\n  }\n};\n","/*eslint-disable */\n\nexport  const displayMap = locations => {\n  mapboxgl.accessToken =\n    'pk.eyJ1Ijoidml2YXZpa3RvcnlpYSIsImEiOiJjbHo4ZXczZ2cwMDUwMmtzYTByNmVqenJwIn0.Dl-Sgygd-puOem9UETCBjg';\n\n  var map = new mapboxgl.Map({\n    container: 'map',\n    style: 'mapbox://styles/mapbox/navigation-day-v1',\n    scrollZoom: false,\n    //   center: [-118.11349, 34.111745], // starting position [lng, lat]\n    //   zoom: 5,\n    //   interactive: false,\n  });\n\n  const bounds = new mapboxgl.LngLatBounds();\n\n  locations.forEach(loc => {\n    // Create marker\n    const el = document.createElement('div');\n    el.className = 'marker';\n\n    // add marker\n    new mapboxgl.Marker({\n      element: el,\n      anchor: 'bottom',\n    })\n      .setLngLat(loc.coordinates)\n      .addTo(map);\n\n    // add popup\n    new mapboxgl.Popup({\n      offset: 30,\n    })\n      .setLngLat(loc.coordinates)\n      .setHTML(`<p>Day ${loc.day}: ${loc.description}  </p>`)\n      .addTo(map);\n\n    // extend map bounds to include current location\n    bounds.extend(loc.coordinates);\n  });\n\n  map.fitBounds(bounds, {\n    padding: {\n      top: 200,\n      bottom: 200,\n      left: 100,\n      right: 100,\n    },\n  });\n};\n"],"names":[],"version":3,"file":"bundle.js.map","sourceRoot":"../../../"}